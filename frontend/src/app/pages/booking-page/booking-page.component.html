<app-page-title
  backLink="/workspaces"
  text="Book your workspace"
/>

<form
  class="form"
  [formGroup]="form"
  (ngSubmit)="onSubmit()"
>
  <div class="section">
    <h3 class="section__title">Reservation details</h3>

    <app-input
      name="name"
      formControlName="name"
      label="Name"
    />

    <app-input
      name="email"
      formControlName="email"
      label="Email"
    />

    <app-dropdown
      name="workspaceType"
      formControlName="workspaceTypeId"
      label="Workspace type"
      placeholder="Choose your workspace"
      [options]="workspaceTypeOptions()"
      (change)="onWorkspaceTypeIdChange($event)"
    />

    @if (roomCapacities()?.length) {
      <app-checkbox-group
        formControlName="roomSize"
        label="What room size do you need?"
        [single]="true"
      >
        @for (capacity of roomCapacities(); track capacity) {
          <app-checkbox
            name="roomCapacity-{{ $index }}"
            [value]="capacity"
          >
            Room for
            <span
              class="font-semibold"
              [ngPlural]="capacity"
            >
              <ng-template ngPluralCase="=1">1 person</ng-template>
              <ng-template ngPluralCase="other">{{ capacity }} people</ng-template>
            </span>
          </app-checkbox>
        }
      </app-checkbox-group>
    }

    @if (deskCountOptions()?.length) {
      <app-dropdown
        name="deskCount"
        formControlName="deskCount"
        label="How many desks do you need?"
        placeholder="Choose number of desks"
        [options]="deskCountOptions()!"
      />
    }
  </div>

  <div class="section">
    <h3 class="section__title">Choose date and time</h3>

    <ng-container formGroupName="date">
      <app-date-picker
        name="startDate"
        formControlName="startDate"
        label="Start date"
      />

      <app-date-picker
        name="endDate"
        formControlName="endDate"
        label="End date"
      />
    </ng-container>

    <ng-container formGroupName="time">
      <app-time-dropdown
        name="startTime"
        formControlName="startTime"
        label="Start time"
        placeholder="Choose start time"
      />

      <app-time-dropdown
        name="endTime"
        formControlName="endTime"
        label="End time"
        placeholder="Choose end time"
      />
    </ng-container>

    <button
      appButton
      class="w-full"
      type="submit"
      [disabled]="form.invalid"
    >
      Submit
    </button>
  </div>
</form>
